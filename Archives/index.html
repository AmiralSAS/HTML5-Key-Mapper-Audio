<html>
	<head>
		<meta content="application/xhtml+xml; charset=UTF-8" http-equiv="Content-Type" />
		<meta http-equiv-"X-UA-Compatible" content="IE=9"/>
		<title>Key Mapper Audio</title>
		<link rel="stylesheet" media="screen" type="text/css" href="./css/normalize.css" />
		<link rel="stylesheet" media="screen" type="text/css" href="./css/styles.css" />
	</head>
	<body>
		<header>
			<h1>Key Mapper Audio</h1>
		</header>

		<div id="content">
			<section>
				<div class="assets_container">
					<h2>Musiques</h2>
					Répertoire musiques <input id="music_directory_path" type="text" placeholder="C:/exemple/musiques" value="E:\workplace\HTML5\Key Mapper Audio\musics" />
					<br /><input type="file" id="musicFiles" name="files[]" multiple />
					<div id="musicTableContainer"></div>
				</div>
				<div class="assets_container">
					<h2>Sons</h2>
					Répertoire sons <input id="sound_directory_path" type="text" placeholder="C:/exemple/sons" value="E:\workplace\HTML5\Key Mapper Audio\sounds" />
					<br /><input type="file" id="soundFiles" name="files[]" multiple />
					<div id="soundTableContainer"></div>
				</div>
				<div class="clear"></div>
			</section>

			<section>
				<div id="explications">
					<p>Cette application permet d'assigner des touches pour la lecture de fichiers audios. Vous pouvez les trier en deux catégories. Les <strong>sons</strong>, plusieurs sons peuvent être joués en même temps. Les <strong>musiques</strong>, il ne peut y avoir qu'une seule musique active, une nouvelle lecture de musique arrêtera la précédente.</p>
				</div>
				<div id="input_controls">
					<p><strong>Entrez les chemins des répertoires</strong>;</p>
				</div>

				<div>
					<p>Formats audio supportés; <em>MP3</em>, <em>Wav</em>, and <em>Ogg</em></p>
				</div>
			</section>
		</div>

		<script type="text/javascript" src="./js/vendor/jquery-2.1.3.js"></script>
		<script type="text/javascript" src="./js/vendor/keymaster.js"></script>
		<script type="text/javascript" src="./js/tablemanager.js"></script>
		<script type="text/javascript" src="./js/audiocontrol.js"></script>
		<script type="text/javascript" src="./js/main.js"></script>
		<!-- <input type="file" id="files" name="files[]" multiple />
		<output id="list"></output> -->
		<script>
		/*
		function handleFileSelect(evt) {
		    var files = evt.target.files; // FileList object
		    console.log(evt);
		    // files is a FileList of File objects. List some properties.
		    var filenames = [];
		    var output = [];
		    for (var i = 0, f; f = files[i]; i++) {
		        output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
		                    f.size, ' bytes, last modified: ',
		                    f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
		                    '</li>');
		        
		    	filenames.push(escape(f.name));
		    }

		    document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
		}
		document.getElementById('files').addEventListener('change', handleFileSelect, false);
		*/
		function handleMusicFileSelect(evt) {
		    var files = evt.target.files; // FileList object
		    var filenames = [];
		    for (var i = 0, f; f = files[i]; i++) {
		    	filenames.push( encodeURIComponent(f.name) );
		    }
		    createTable({
			    containerId: "musicTableContainer",
			    tableId: "musicMapper",
    			type: "music",
		    	filenames: filenames
		    });
		}
		document.getElementById('musicFiles').addEventListener('change', handleMusicFileSelect, false);
		
		function handleSoundFileSelect(evt) {
		    var files = evt.target.files; // FileList object
		    var filenames = [];
		    for (var i = 0, f; f = files[i]; i++) {
		    	filenames.push( encodeURIComponent(f.name) );
		    }
		    createTable({
			    containerId: "soundTableContainer",
			    tableId: "soundMapper",
    			type: "sound",
		    	filenames: filenames
		    });
		}
		document.getElementById('soundFiles').addEventListener('change', handleSoundFileSelect, false);
		</script>
	</body>
</html>